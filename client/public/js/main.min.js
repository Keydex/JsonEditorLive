var json={},container=document.getElementById("jsoneditor"),container2=document.getElementById("jsoneditor2"),options={mode:"tree",modes:["code","tree"],onError:function(e){alert(e.toString())},onModeChange:function(e,o){console.log("Mode switched from",o,"to",e),"tree"==e&&editor.expandAll()}},editor=new JSONEditor(container,options,json);editor.expandAll(),FileReaderJS.setupInput(document.getElementById("loadDocument"),{readAsDefault:"Text",on:{load:function(e,o){editor.setText(e.target.result)}}}),document.getElementById("saveDocument").onclick=function(){fname=window.prompt("Save as..."),-1==fname.indexOf(".")?fname+=".json":"json"==fname.split(".").pop().toLowerCase()||(fname=fname.split(".")[0]+".json");var e=new Blob([editor.getText()],{type:"application/json;charset=utf-8"});saveAs(e,fname)};